"use strict";(()=>{var e={id:223,ids:[223]};e.modules={524:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1047:(e,o,t)=>{t.r(o),t.d(o,{headerHooks:()=>_,originalPathname:()=>g,requestAsyncStorage:()=>h,routeModule:()=>d,serverHooks:()=>m,staticGenerationAsyncStorage:()=>f,staticGenerationBailout:()=>y});var r={};t.r(r),t.d(r,{POST:()=>i});var n=t(884),a=t(6132),s=t(5798);async function i(e){try{const{profiles:o,searchQuery:t}=await e.json();if(!o||!Array.isArray(o))return s.Z.json({success:!1,error:"Profiles array is required"},{status:400});const r=t||function(e){const o=[...new Set(e.slice(0,3).map((e=>e.title)))],t=[...new Set(e.slice(0,3).map((e=>e.location)))];return`${o.join(" OR ")} ${t.join(" OR ")}`}(o),n=await async function(e,o){const t=[],r=await async function(e){const o=await fetch("https://api.apollo.io/api/v1/mixed_people/api_search",{method:"POST",headers:{"Content-Type":"application/json","Cache-Control":"no-cache",accept:"application/json","X-Api-Key":process.env.APOLLO_API_KEY||"your-api-key-here"},body:JSON.stringify({q_keywords:e,page:1,per_page:20,person_titles:p(e),organization_locations:u(e)})});if(!o.ok)throw new Error(`Apollo API error: ${o.status} ${o.statusText}`);return await o.json()}(o);for(const n of e){const e=l(n,r.people||[]);e?t.push({...n,apolloEnriched:!0,apolloId:e.id,verifiedEmail:e.has_email?"found@apollo.io":null,directPhone:"Yes"===e.has_direct_phone?"+1-XXX-XXX-XXXX":null,company:e.organization?.name||n.company,confidence:c(n,e),apolloUrl:`https://app.apollo.io/#/people/${e.id}`,lastRefreshed:e.last_refreshed_at,hasEmail:e.has_email,hasDirectPhone:e.has_direct_phone,locationData:{city:e.has_city,state:e.has_state,country:e.has_country}}):t.push({...n,apolloEnriched:!1,confidence:"low"})}return t}(o,r);return s.Z.json({success:!0,profiles:n,count:n.length,source:"apollo"})}catch(o){return console.error("Apollo enrichment error:",o),s.Z.json({success:!1,error:`Apollo enrichment failed: ${o.message}`},{status:500})}}function l(e,o){return o.length?o.find((o=>{const t=`${o.first_name} ${o.last_name_obfuscated}`,r=function(e,o){const t=e.toLowerCase().replace(/\s+/g,""),r=o.toLowerCase().replace(/\s+/g,"");return t.includes(r)||r.includes(t)?.8:.3}(e.name,t),n=function(e,o){if(!e||!o)return 0;const t=e.toLowerCase().split(/\s+/),r=o.toLowerCase().split(/\s+/);return t.filter((e=>r.some((o=>o.includes(e)||e.includes(o))))).length/Math.max(t.length,r.length)}(e.title,o.title);return r>.6||n>.7})):null}function c(e,o){let t=0;if(o.has_email&&(t+=2),"Yes"===o.has_direct_phone&&(t+=2),o.organization?.name&&(t+=1),o.last_refreshed_at){(new Date-new Date(o.last_refreshed_at))/864e5<30&&(t+=1)}return t>=4?"high":t>=2?"medium":"low"}function p(e){return["ceo","cto","founder","director","manager","vp","president"].filter((o=>e.toLowerCase().includes(o)))}function u(e){return["new york","london","san francisco","chicago","boston"].filter((o=>e.toLowerCase().includes(o)))}const d=new n.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/apollo/route",pathname:"/api/apollo",filename:"route",bundlePath:"app/api/apollo/route"},resolvedPagePath:"D:\\linkedin-scraper\\app\\api\\apollo\\route.js",nextConfigOutput:"standalone",userland:r}),{requestAsyncStorage:h,staticGenerationAsyncStorage:f,serverHooks:m,headerHooks:_,staticGenerationBailout:y}=d,g="/api/apollo/route"}};var o=require("../../../webpack-runtime.js");o.C(e);var t=o.X(0,[997],(()=>{return e=1047,o(o.s=e);var e}));module.exports=t})();